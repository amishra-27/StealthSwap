---
/*
Docs references:
- Astro islands (`client:load`): https://docs.astro.build/en/concepts/islands/
- Uniswap v4 hooks concept (pool-scoped hook execution): https://docs.uniswap.org/contracts/v4/concepts/hooks
- Uniswap v4 PoolManager lifecycle overview: https://docs.uniswap.org/contracts/v4/overview
- Uniswap v4 AsyncSwap/custom accounting context: https://docs.uniswap.org/contracts/v4/quickstart/hooks/async-swap
- OpenZeppelin Uniswap Hooks base contracts: not used in this frontend page.
*/

import MyIntents from "../components/MyIntents.vue";
import QueueSwapForm from "../components/QueueSwapForm.vue";
import WalletPanel from "../components/WalletPanel.vue";
import WindowStatus from "../components/WindowStatus.vue";
---

<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>VeilSwap - Uniswap v4 Privacy DeFi</title>
  </head>
  <body>
    <main class="layout">
      <header class="hero">
        <p class="kicker">Stealth Batching Interface</p>
        <h1>VeilSwap (Uniswap v4 Privacy DeFi)</h1>
      </header>

      <section class="card">
        <h2>1) Connect Wallet</h2>
        <WalletPanel client:load />
      </section>

      <section class="card">
        <h2>2) Current Window Status</h2>
        <WindowStatus client:load />
      </section>

      <section class="card">
        <h2>3) Queue a Swap</h2>
        <QueueSwapForm client:load />
      </section>

      <section class="card">
        <h2>4) Window Details</h2>
        <p>
          The status panel above includes window accounting fields (`totalIn`, `cleared`, and
          `totalOut` once cleared) from the VeilBatchHook contract.
        </p>
      </section>

      <section class="card">
        <h2>5) Claim Panel</h2>
        <MyIntents client:load />
      </section>

      <section class="card how">
        <h2>How it works</h2>
        <p>
          VeilSwap queues intents into N-block windows through a Uniswap v4 hook, then settles and
          distributes output pro-rata after clearing. Read:
          <a href="https://docs.uniswap.org/contracts/v4/concepts/hooks" target="_blank" rel="noreferrer">Hooks</a>,
          <a href="https://docs.uniswap.org/contracts/v4/overview" target="_blank" rel="noreferrer">PoolManager lifecycle</a>,
          and
          <a href="https://docs.uniswap.org/contracts/v4/quickstart/hooks/async-swap" target="_blank" rel="noreferrer">AsyncSwap/custom accounting</a>.
        </p>
      </section>
    </main>
  </body>
</html>

<style>
  :root {
    --bg: #f5f6f8;
    --panel: #ffffff;
    --ink: #171717;
    --muted: #4a4a4a;
    --line: #dadce3;
  }

  * {
    box-sizing: border-box;
  }

  body {
    margin: 0;
    font-family: "IBM Plex Sans", "Segoe UI", sans-serif;
    color: var(--ink);
    background:
      radial-gradient(circle at 20% 10%, #fff, #f0f2f8 35%, #e8ebf2 100%);
  }

  .layout {
    width: min(980px, 92vw);
    margin: 2rem auto 3rem;
    display: grid;
    gap: 1rem;
  }

  .hero {
    padding: 1rem 1.25rem;
    border: 1px solid var(--line);
    border-radius: 0.8rem;
    background: linear-gradient(120deg, #ffffff, #f0f5ff);
  }

  .hero h1 {
    margin: 0.25rem 0 0;
    font-size: clamp(1.35rem, 2.4vw, 2rem);
    line-height: 1.2;
  }

  .kicker {
    margin: 0;
    text-transform: uppercase;
    letter-spacing: 0.08em;
    color: #41618e;
    font-size: 0.72rem;
    font-weight: 700;
  }

  .card {
    border: 1px solid var(--line);
    border-radius: 0.8rem;
    background: var(--panel);
    padding: 1rem 1.1rem;
    display: grid;
    gap: 0.6rem;
  }

  .card h2 {
    margin: 0;
    font-size: 1.05rem;
  }

  .card p {
    margin: 0;
    color: var(--muted);
    line-height: 1.45;
  }

  .how a {
    color: #134a89;
  }

  @media (max-width: 640px) {
    .layout {
      margin: 1rem auto 1.5rem;
    }
  }
</style>
