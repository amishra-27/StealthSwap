import{_ as W,T as s,t as h,w as r,C as _,W as y}from"./_plugin-vue_export-helper.CTKArEa2.js";/* empty css                       */import{c as A,a,t as u,d as k,o as I,b as E,r as d,e as N,f as P}from"./runtime-core.esm-bundler.CJzaKusY.js";const S=k({__name:"WalletPanel",setup(C,{expose:l}){l();const o=d(null),n=d(null),t=d("Connect your wallet to begin."),c=d(!1),g=N(()=>o.value?`${o.value.slice(0,6)}...${o.value.slice(-4)}`:"Not connected");function p(e){return e===null?"Unknown":e===s?`${h.name} (${e})`:`Wrong network (${e})`}async function m(e=!1){if(!r){e||(t.value="No injected wallet detected.");return}try{const i=await r.getAddresses();if(o.value=i[0]??null,n.value=await r.getChainId(),n.value!==s){t.value=`Wrong network. Please switch to ${h.name} (${s}).`;return}t.value=o.value?"Wallet connected on Sepolia.":"Wallet detected. Click connect."}catch(i){t.value=i instanceof Error?i.message:"Failed to read wallet state."}}async function b(){if(!r){t.value="No injected wallet detected.";return}c.value=!0;try{const[e]=await r.requestAddresses();if(o.value=e??null,n.value=await r.getChainId(),n.value!==s)throw new _(n.value);t.value="Wallet connected."}catch(e){e instanceof y||e instanceof _||e instanceof Error?t.value=e.message:t.value="Wallet connection failed."}finally{c.value=!1}}function f(e){o.value=e[0]??null}function v(e){if(n.value=Number.parseInt(e,16),n.value!==s){t.value=`Wrong network. Please switch to ${h.name} (${s}).`;return}t.value="Wallet connected on Sepolia."}I(()=>{m(!0),window.ethereum&&(window.ethereum.on("accountsChanged",f),window.ethereum.on("chainChanged",v))}),E(()=>{window.ethereum&&(window.ethereum.removeListener("accountsChanged",f),window.ethereum.removeListener("chainChanged",v))});const w={account:o,chainId:n,message:t,busy:c,shortAccount:g,formatChainLabel:p,refreshWalletState:m,connectWallet:b,onAccountsChanged:f,onChainChanged:v};return Object.defineProperty(w,"__isScriptSetup",{enumerable:!1,value:!0}),w}}),$={class:"panel"},x={class:"actions"},L=["disabled"],j={class:"details"},B={class:"message"};function T(C,l,o,n,t,c){return P(),A("div",$,[a("div",x,[a("button",{type:"button",class:"button",disabled:n.busy,onClick:n.connectWallet},u(n.busy?"Connecting...":"Connect Wallet"),9,L)]),a("dl",j,[a("div",null,[l[0]||(l[0]=a("dt",null,"Address",-1)),a("dd",null,u(n.shortAccount),1)]),a("div",null,[l[1]||(l[1]=a("dt",null,"Chain",-1)),a("dd",null,u(n.formatChainLabel(n.chainId)),1)])]),a("p",B,u(n.message),1)])}const q=W(S,[["render",T],["__scopeId","data-v-3b824d78"]]);export{q as default};
