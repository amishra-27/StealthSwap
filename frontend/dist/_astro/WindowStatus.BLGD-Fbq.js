import{_ as C,g as N,p as y,s as E}from"./_plugin-vue_export-helper.CTKArEa2.js";import{g as O,M as R}from"./contractConfig.cbomkfKb.js";/* empty css                       */import{c as A,a as l,t as o,d as D,o as x,b as M,r as a,f as P}from"./runtime-core.esm-bundler.CJzaKusY.js";const T=D({__name:"WindowStatus",setup(W,{expose:t}){t();const u=O(),n=a(null),v=a(null),s=a(null),k=a(null),_=a(null),g=a(null),I=a(null),c=a("Loading window state..."),w=a(!1);let r;function p(){return R}async function b(){if(!u){c.value=p();return}w.value=!0;try{const e=N({address:u,abi:E,client:y}),[d,f,S]=await Promise.all([y.getBlockNumber(),e.read.startBlock(),e.read.blocksPerWindow()]);n.value=d;let i;try{i=await e.read.getWindowId([d])}catch{i=d>=f?(d-f)/S:0n}v.value=i,s.value=f+(i+1n)*S-1n,k.value=s.value>=d?s.value-d+1n:0n;const m=await e.read.getWindow([i]);_.value=m.totalIn,g.value=m.totalOut,I.value=m.cleared,c.value="Window status updated."}catch(e){c.value=e instanceof Error?e.message:"Failed to load window state."}finally{w.value=!1}}x(()=>{b(),r=window.setInterval(()=>{b()},12e3)}),M(()=>{r!==void 0&&window.clearInterval(r)});const B={address:u,blockNumber:n,windowId:v,endBlock:s,blocksRemaining:k,totalIn:_,totalOut:g,cleared:I,message:c,busy:w,get intervalId(){return r},set intervalId(e){r=e},addressError:p,refresh:b};return Object.defineProperty(B,"__isScriptSetup",{enumerable:!1,value:!0}),B}}),G={class:"panel"},H={class:"actions"},V=["disabled"],h={class:"stats"},j={class:"message"};function F(W,t,u,n,v,s){return P(),A("div",G,[l("div",H,[l("button",{class:"button",type:"button",disabled:n.busy,onClick:n.refresh},o(n.busy?"Refreshing...":"Refresh"),9,V)]),l("dl",h,[l("div",null,[t[0]||(t[0]=l("dt",null,"Block Number",-1)),l("dd",null,o(n.blockNumber??"—"),1)]),l("div",null,[t[1]||(t[1]=l("dt",null,"Window ID",-1)),l("dd",null,o(n.windowId??"—"),1)]),l("div",null,[t[2]||(t[2]=l("dt",null,"End Block",-1)),l("dd",null,o(n.endBlock??"—"),1)]),l("div",null,[t[3]||(t[3]=l("dt",null,"Countdown (blocks)",-1)),l("dd",null,o(n.blocksRemaining??"—"),1)]),l("div",null,[t[4]||(t[4]=l("dt",null,"Total In",-1)),l("dd",null,o(n.totalIn??"—"),1)]),l("div",null,[t[5]||(t[5]=l("dt",null,"Cleared",-1)),l("dd",null,o(n.cleared===null?"—":n.cleared?"Yes":"No"),1)]),l("div",null,[t[6]||(t[6]=l("dt",null,"Total Out",-1)),l("dd",null,o(n.totalOut??"—"),1)])]),l("p",j,o(n.message),1)])}const z=C(T,[["render",F],["__scopeId","data-v-c2c5943c"]]);export{z as default};
